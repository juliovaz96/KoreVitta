module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("kv-surface rounded-2xl transition-[border-color,box-shadow,background-color] duration-150",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("p-5 pb-3",a),...d})}function f({className:a,...d}){return(0,b.jsx)("h2",{className:(0,c.cn)("text-base font-semibold tracking-tight text-foreground md:text-lg",a),...d})}function g({className:a,...d}){return(0,b.jsx)("p",{className:(0,c.cn)("text-sm leading-6 text-muted-foreground",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("px-5 pb-5",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium leading-none tracking-[0.01em] transition-colors",{variants:{variant:{default:"border-border bg-secondary text-secondary-foreground",success:"border-chart-3/35 bg-chart-3/10 text-foreground",warning:"border-chart-5/35 bg-chart-5/10 text-foreground",danger:"border-destructive/35 bg-destructive/10 text-destructive",outline:"border-border bg-background text-muted-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("span",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c="text",...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground transition-[border-color,box-shadow,background-color] duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",0,e])},68930,a=>{"use strict";var b=a.i(72131),c=a.i(19032),d=a.i(81870);function e(){let a=(0,b.useCallback)(()=>c.apiClient.listThreads(),[]);return(0,d.useResource)(a,["threads"],{staleTime:15e3})}function f(a){let e=(0,b.useCallback)(()=>c.apiClient.listMessages(a),[a]);return(0,d.useResource)(e,["thread-messages",a],{enabled:!!a,staleTime:5e3})}a.s(["useMessages",()=>f,"useThreads",()=>e])},22823,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(68930),f=a.i(86304),g=a.i(91119),h=a.i(66718),i=a.i(99570),j=a.i(81771);function k(){let[a,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),p=(0,d.useParams)().id,q=(0,e.useThreads)(),r=(0,c.useMemo)(()=>q.data&&0!==q.data.length?l?q.data.find(a=>a.id===l)??null:q.data.find(a=>a.patientId===p)??q.data[0]:null,[p,l,q.data]),s=(0,e.useMessages)(r?.id??"");return q.loading?(0,b.jsx)(j.LoadingState,{label:"Carregamento das conversas"}):q.error?(0,b.jsx)(j.ErrorState,{description:"Não foi possível concluir a ação. Tente novamente.",onRetry:()=>{q.reload()}}):r?(0,b.jsxs)("main",{className:"mx-auto flex w-full max-w-6xl flex-col gap-5",children:[(0,b.jsxs)("header",{className:"kv-surface rounded-2xl p-6",children:[(0,b.jsx)(f.Badge,{variant:"outline",children:"PRO-10"}),(0,b.jsx)("h1",{className:"mt-3 text-2xl font-semibold tracking-tight",children:"Mensagens"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Converse com o paciente e mantenha contexto do acompanhamento."}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-muted-foreground",children:["Conversa ativa: ",r.patientName]})]}),(0,b.jsxs)("section",{className:"grid gap-4 lg:grid-cols-[320px_1fr]",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Conversas"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("ul",{className:"space-y-2",children:q.data?.map(a=>(0,b.jsx)("li",{className:`rounded-xl border px-3 py-2 text-sm transition-colors ${a.id===r.id?"border-primary bg-primary/10":"border-border"}`,children:(0,b.jsxs)("button",{type:"button",className:"w-full text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2",onClick:()=>m(a.id),"aria-pressed":a.id===r.id,"aria-current":a.id===r.id?"true":void 0,"aria-label":`Abrir conversa com ${a.patientName}`,children:[(0,b.jsx)("p",{className:"font-medium",children:a.patientName}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1",children:a.lastMessage}),a.unreadCount>0?(0,b.jsxs)(f.Badge,{variant:"warning",className:"mt-1",children:[a.unreadCount," não lidas"]}):null]})},a.id))})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Conversa ativa"})}),(0,b.jsx)(g.CardContent,{children:s.loading?(0,b.jsx)(j.LoadingState,{label:"Carregamento da conversa"}):s.error?(0,b.jsx)(j.ErrorState,{description:"Não foi possível concluir a ação. Tente novamente.",onRetry:()=>{s.reload()}}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("ul",{className:"space-y-2",children:(s.data??[]).map(a=>(0,b.jsxs)("li",{className:"rounded-xl border border-border px-3 py-2 text-sm",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:a.sender}),(0,b.jsx)("p",{className:"mt-1",children:a.content})]},a.id))}),(0,b.jsxs)("form",{className:"mt-4 flex gap-2",onSubmit:b=>{b.preventDefault(),a.trim()&&(k(""),o(Date.now()))},children:[(0,b.jsx)(h.Input,{placeholder:"Responder paciente...",value:a,onChange:a=>k(a.target.value)}),(0,b.jsx)(i.Button,{type:"submit",disabled:!a.trim(),children:"Enviar mensagem"})]}),(0,b.jsx)("p",{className:"mt-2 text-xs text-muted-foreground","aria-live":"polite",children:n?"Mensagem enviada para revisão do histórico.":"Pressione Enter para enviar mais rápido."})]})})]})]})]}):(0,b.jsx)(j.EmptyState,{title:"Sem dados",description:"Ainda não há dados para exibir aqui."})}a.s(["default",()=>k])}];

//# sourceMappingURL=src_6e9d2d12._.js.map